[gd_scene load_steps=11 format=3 uid="uid://42ev86leuhyu"]

[ext_resource type="Script" path="res://Scripts/Player.gd" id="1"]
[ext_resource type="Texture2D" uid="uid://dogduhmo1a1ri" path="res://Assets/Sprites/Player/gBot_pieces.png" id="2_uxfb1"]
[ext_resource type="Script" path="res://Scripts/Receiver.gd" id="3"]
[ext_resource type="Script" path="res://Scripts/HurtBox.gd" id="4"]
[ext_resource type="AudioStream" uid="uid://cd6vlscmih1cr" path="res://Assets/Sounds/bluepen_hit.mp3" id="7"]
[ext_resource type="AudioStream" uid="uid://c6siqjw42kyxv" path="res://Assets/Sounds/player_hit_impact.wav" id="8"]

[sub_resource type="RectangleShape2D" id="1"]
size = Vector2(22, 64)

[sub_resource type="RectangleShape2D" id="2"]
size = Vector2(20, 62)

[sub_resource type="CircleShape2D" id="3"]
radius = 59.1354

[sub_resource type="CircleShape2D" id="4"]
radius = 67.72

[node name="Player" type="CharacterBody2D"]
collision_layer = 0
script = ExtResource("1")

[node name="limbSprites" type="Node2D" parent="."]

[node name="armLeft" type="Polygon2D" parent="limbSprites"]
position = Vector2(-143, -134)
texture = ExtResource("2_uxfb1")
skeleton = NodePath("../../Skeleton2D")
polygon = PackedVector2Array(181.982, 49.5496, 232.432, 24.3243, 279.279, 45.9459, 271.171, 117.117, 248.649, 192.793, 294.595, 305.405, 275.676, 352.252, 220.721, 366.667, 192.793, 327.027, 174.775, 195.496, 217.13, 183.796, 217.593, 197.222, 175.931, 176.791, 177.65, 215.473, 252.149, 181.662, 255.587, 207.736)
uv = PackedVector2Array(181.982, 49.5496, 232.432, 24.3243, 279.279, 45.9459, 271.171, 117.117, 248.649, 192.793, 294.595, 305.405, 275.676, 352.252, 220.721, 366.667, 192.793, 327.027, 174.775, 195.496, 217.13, 183.796, 217.593, 197.222, 175.931, 176.791, 177.65, 215.473, 252.149, 181.662, 255.587, 207.736)
polygons = [PackedInt32Array(12, 0, 1, 2, 3, 14, 10), PackedInt32Array(12, 10, 11, 9), PackedInt32Array(10, 11, 4, 14), PackedInt32Array(13, 9, 11, 4, 15, 5, 6, 7, 8)]
bones = ["hip", PackedFloat32Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0), "hip/chest", PackedFloat32Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0), "hip/chest/rightArm", PackedFloat32Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0), "hip/chest/rightArm/rightFore", PackedFloat32Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0), "hip/chest/leftArm", PackedFloat32Array(0.68, 0.68, 0.68, 0.68, 0.34, 0, 0, 0, 0, 0.34, 0.34, 0, 0.68, 0, 0.68, 0), "hip/chest/leftArm/leftFore", PackedFloat32Array(0, 0, 0, 0, 0.34, 0.68, 0.68, 0.68, 0.68, 0.34, 0, 0.34, 0, 0.68, 0, 0.68), "hip/chest/head", PackedFloat32Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0), "hip/chest/head/jaw", PackedFloat32Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0), "hip/rightLeg", PackedFloat32Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0), "hip/rightLeg/rightCalf", PackedFloat32Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0), "hip/leftLeg", PackedFloat32Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0), "hip/leftLeg/leftCalf", PackedFloat32Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0)]
internal_vertex_count = 6

[node name="legLeft" type="Polygon2D" parent="limbSprites"]
position = Vector2(-261, -310)
texture = ExtResource("2_uxfb1")
skeleton = NodePath("../../Skeleton2D")
polygon = PackedVector2Array(277.869, 404.098, 272.131, 482.787, 247.541, 522.951, 243.443, 690.164, 408.197, 692.623, 401.639, 650, 377.869, 605.738, 344.262, 595.082, 340.164, 504.098, 352.459, 419.672, 319.672, 380.328)
uv = PackedVector2Array(277.869, 404.098, 272.131, 482.787, 247.541, 522.951, 243.443, 690.164, 408.197, 692.623, 401.639, 650, 377.869, 605.738, 344.262, 595.082, 340.164, 504.098, 352.459, 419.672, 319.672, 380.328)

[node name="torso" type="Polygon2D" parent="limbSprites"]
position = Vector2(-423, -184)
texture = ExtResource("2_uxfb1")
skeleton = NodePath("../../Skeleton2D")
polygon = PackedVector2Array(347.748, 92.7928, 383.784, 77.4775, 398.198, 26.1261, 450.45, 11.7117, 493.694, 43.2432, 487.387, 84.6847, 526.126, 159.459, 516.216, 222.523, 476.577, 248.649, 500, 284.685, 480.18, 349.55, 367.568, 346.847, 337.838, 279.279, 369.369, 247.748, 333.333, 166.667)
uv = PackedVector2Array(347.748, 92.7928, 383.784, 77.4775, 398.198, 26.1261, 450.45, 11.7117, 493.694, 43.2432, 487.387, 84.6847, 526.126, 159.459, 516.216, 222.523, 476.577, 248.649, 500, 284.685, 480.18, 349.55, 367.568, 346.847, 337.838, 279.279, 369.369, 247.748, 333.333, 166.667)

[node name="head" type="Polygon2D" parent="limbSprites"]
position = Vector2(-638, -671)
texture = ExtResource("2_uxfb1")
skeleton = NodePath("../../Skeleton2D")
polygon = PackedVector2Array(483.607, 356.557, 583.607, 250, 737.705, 250.82, 823.77, 340.164, 809.016, 518.033, 485.246, 513.115)
uv = PackedVector2Array(483.607, 356.557, 583.607, 250, 737.705, 250.82, 823.77, 340.164, 809.016, 518.033, 485.246, 513.115)

[node name="jaw" type="Polygon2D" parent="limbSprites"]
position = Vector2(-631, -767)
texture = ExtResource("2_uxfb1")
skeleton = NodePath("../../Skeleton2D")
polygon = PackedVector2Array(485.246, 576.229, 807.377, 563.934, 816.393, 622.951, 775.41, 672.131, 618.852, 693.443, 502.459, 669.672)
uv = PackedVector2Array(485.246, 576.229, 807.377, 563.934, 816.393, 622.951, 775.41, 672.131, 618.852, 693.443, 502.459, 669.672)

[node name="legRight" type="Polygon2D" parent="limbSprites"]
position = Vector2(-118, -301)
texture = ExtResource("2_uxfb1")
skeleton = NodePath("../../Skeleton2D")
polygon = PackedVector2Array(63.9344, 400.82, 52.459, 476.229, 27.8689, 516.393, 23.7705, 683.607, 188.525, 686.066, 181.967, 643.443, 158.197, 599.18, 124.59, 588.525, 120.492, 497.541, 125.41, 418.033, 95.9016, 377.049)
uv = PackedVector2Array(63.9344, 400.82, 52.459, 476.229, 27.8689, 516.393, 23.7705, 683.607, 188.525, 686.066, 181.967, 643.443, 158.197, 599.18, 124.59, 588.525, 120.492, 497.541, 125.41, 418.033, 95.9016, 377.049)

[node name="armRight" type="Polygon2D" parent="limbSprites"]
position = Vector2(-136, -129)
texture = ExtResource("2_uxfb1")
skeleton = NodePath("../../Skeleton2D")
polygon = PackedVector2Array(40, 30, 80, 20, 132.432, 36.9369, 129.73, 130.631, 100, 181.081, 136.036, 308.108, 112.613, 360.36, 61.2613, 363.063, 18.9189, 299.099, 24.3243, 186.486)
uv = PackedVector2Array(40, 30, 80, 20, 132.432, 36.9369, 129.73, 130.631, 100, 181.081, 136.036, 308.108, 112.613, 360.36, 61.2613, 363.063, 18.9189, 299.099, 24.3243, 186.486)

[node name="Skeleton2D" type="Skeleton2D" parent="."]

[node name="hip" type="Bone2D" parent="Skeleton2D"]
position = Vector2(15, 123)
rest = Transform2D(1, 0, 0, 1, 15, 123)

[node name="chest" type="Bone2D" parent="Skeleton2D/hip"]
position = Vector2(-1, -142)
rest = Transform2D(1, 0, 0, 1, -1, -142)

[node name="rightArm" type="Bone2D" parent="Skeleton2D/hip/chest"]
position = Vector2(-88, -24)
rest = Transform2D(1, 0, 0, 1, -88, -24)

[node name="rightFore" type="Bone2D" parent="Skeleton2D/hip/chest/rightArm"]
position = Vector2(-5, 101)
rotation = 1.39277
rest = Transform2D(0.177085, 0.984196, -0.984196, 0.177085, -5, 101)
auto_calculate_length_and_angle = false
length = 135.81
bone_angle = 0.0

[node name="leftArm" type="Bone2D" parent="Skeleton2D/hip/chest"]
position = Vector2(74, -23)
rotation = -1.19381
rest = Transform2D(1, 0, 0, 1, 74, -23)

[node name="leftFore" type="Bone2D" parent="Skeleton2D/hip/chest/leftArm"]
position = Vector2(-14, 106)
rotation = 0.785398
scale = Vector2(1, 1)
rest = Transform2D(0.228351, 0.973579, -0.973579, 0.228351, -14, 106)
auto_calculate_length_and_angle = false
length = 108.162
bone_angle = 0.0

[node name="head" type="Bone2D" parent="Skeleton2D/hip/chest"]
position = Vector2(-71, -119)
rest = Transform2D(1, 0, 0, 1, -71, -119)

[node name="jaw" type="Bone2D" parent="Skeleton2D/hip/chest/head"]
position = Vector2(108, 0)
rest = Transform2D(1, 0, 0, 1, 108, 0)
auto_calculate_length_and_angle = false
length = 89.73
bone_angle = 0.0

[node name="rightLeg" type="Bone2D" parent="Skeleton2D/hip"]
position = Vector2(-56, -2)
rest = Transform2D(1, 0, 0, 1, -56, -2)

[node name="rightCalf" type="Bone2D" parent="Skeleton2D/hip/rightLeg"]
position = Vector2(-16, 89)
rotation = 1.56381
rest = Transform2D(0.00698127, 0.999976, -0.999976, 0.00698127, -16, 89)
auto_calculate_length_and_angle = false
length = 126.595
bone_angle = 0.0

[node name="leftLeg" type="Bone2D" parent="Skeleton2D/hip"]
position = Vector2(42, -11)
rest = Transform2D(1, 0, 0, 1, 42, -11)

[node name="leftCalf" type="Bone2D" parent="Skeleton2D/hip/leftLeg"]
position = Vector2(-34, 86)
rotation = 1.55509
scale = Vector2(1, 1)
rest = Transform2D(0.0157073, 0.999877, -0.999877, 0.0157073, -34, 86)
auto_calculate_length_and_angle = false
length = 126.781
bone_angle = 0.0

[node name="Gun" type="Node2D" parent="."]
visible = false
position = Vector2(0, -10)

[node name="Receiver" type="Node2D" parent="Gun"]
script = ExtResource("3")
speed = 2400

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
visible = false
position = Vector2(1, 0)
shape = SubResource("1")
disabled = true

[node name="HurtBox" type="Area2D" parent="."]
visible = false
collision_layer = 8
collision_mask = 0
script = ExtResource("4")

[node name="CollisionShape2D2" type="CollisionShape2D" parent="HurtBox"]
position = Vector2(0, 1)
shape = SubResource("2")

[node name="DetectArea" type="Area2D" parent="."]
visible = false
collision_layer = 128
collision_mask = 0
script = ExtResource("4")

[node name="CollisionShape2D2" type="CollisionShape2D" parent="DetectArea"]
shape = SubResource("2")

[node name="InteractionArea" type="Area2D" parent="."]
visible = false
collision_layer = 0
collision_mask = 4

[node name="CollisionShape2D" type="CollisionShape2D" parent="InteractionArea"]
shape = SubResource("3")

[node name="ParryArea" type="Area2D" parent="."]
visible = false
collision_layer = 0
collision_mask = 32
monitorable = false

[node name="CollisionShape2D" type="CollisionShape2D" parent="ParryArea"]
shape = SubResource("4")

[node name="Camera2D" type="Camera2D" parent="."]
visible = false

[node name="top" type="Marker2D" parent="."]
visible = false
position = Vector2(15, -32)

[node name="bottom" type="Marker2D" parent="."]
visible = false
position = Vector2(-15, 32)

[node name="hit_sound" type="AudioStreamPlayer2D" parent="."]
visible = false
stream = ExtResource("7")
bus = &"SFX"

[node name="hit_sound_impact" type="AudioStreamPlayer2D" parent="."]
visible = false
stream = ExtResource("8")
volume_db = 15.732
pitch_scale = 0.3
bus = &"SFX"

[node name="DashTimer" type="Timer" parent="."]
wait_time = 0.2
one_shot = true

[node name="ShootTimer" type="Timer" parent="."]
wait_time = 0.1
one_shot = true

[node name="DeathResetTimer" type="Timer" parent="."]
wait_time = 0.6
one_shot = true

[node name="ParryTimer" type="Timer" parent="."]
wait_time = 0.2
one_shot = true

[node name="ParryDurationTimer" type="Timer" parent="."]
wait_time = 0.1
one_shot = true

[connection signal="got_hit" from="HurtBox" to="." method="_on_HurtBox_got_hit"]
[connection signal="got_hit" from="DetectArea" to="." method="_on_HurtBox_got_hit"]
[connection signal="timeout" from="DeathResetTimer" to="." method="_on_DeathResetTimer_timeout"]
[connection signal="timeout" from="ParryDurationTimer" to="." method="_on_ParryDurationTimer_timeout"]
